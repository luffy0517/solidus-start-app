# Solidus Starter Frontend development information
This document aims to give some extra information for developers that are going 
to contribute to our `solidus_starter_frontend` component.

### Running the sandbox

You can run `bin/sandbox` to create a sandboxed Solidus application. The
storefront of the app would be generated by this template. The path for the
sandbox app is `./sandbox`.

`bin/rails` will forward any Rails commands to `sandbox/bin/rails`.

Here's an example:

```
$ bin/rails server
=> Booting Puma
=> Rails 6.0.2.1 application starting in development
* Listening on tcp://127.0.0.1:3000
Use Ctrl-C to stop
```

Default username and password for admin are: `admin@example.com` and `test123`.

You can run `bin/guard` to sync changes from the templates directory to the
sandbox. Please see the Guardfile for the configuration.

## Solidus Compare tool
`solidus_compare` is a tool that we created to keep track of the changes made to
[solidus_frontend](https://github.com/solidusio/solidus/tree/master/frontend), 
which we used as source project in the beginning.

It is connected to our CI; when a new PR is opened, if a change is detected on 
Solidus Frontend, the workflow will fail and it will report the files changed.

In that case, it is needed to evaluate those changes and eventually apply them 
to our component. After this step, it is possible to mark those changes as 
"managed".

In practical terms:
- run locally `bin/solidus_compare` in any branch;
- evaluate the diff of the changes shown in the console;
- apply the required changes (if they are useful to the project);
- run `bin/solidus_compare -u` which will update the hashes in the config file;
- commit the changes and check the CI.

The tool internally works in this way:
- configuration file is loaded (`config/solidus_compare.yml`);
- remote GIT source is updated using the parameters provided by the config file;
- compare process is executed and a hash for each file is calculated;
- if they match the hashes saved in the configuration there are no differences.

### Docker development

If you are a docker user you can wake up the project as usual with:

```bash
docker-compose up -d
```

Wait for all the dependencies to be installed. You can check progress with `docker-compose logs -f app`.

Then you can dispatch commands to the `app` container:

```bash
docker-compose exec app bin/rails server
```

When running the [sandbox application](#running-the-sandbox), take into account
that you need to bind to `0.0.0.0`. By default, port `3000` is exposed but you
can changed it through `SANDBOX_PORT` environment variable:

```bash
SANDBOX_PORT=4000 docker-compose up -d
docker-compose exec app bin/sandbox
docker-compose exec app bin/rails server --binding 0.0.0.0 --port 4000
```
